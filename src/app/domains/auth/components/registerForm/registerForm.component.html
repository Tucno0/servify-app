@if ( showRegister() ) {
  <form class="mt-8" [formGroup]="form" (ngSubmit)="register()">
    <div class="space-y-5">

      <!--! Email -->
      <div>
        <label for="email" class="text-base font-medium text-gray-900">
          Email
        </label>

        <div class="mt-2.5 relative text-gray-400 focus-within:text-gray-600">
          <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            <svg
              class="w-5 h-5"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"
              />
            </svg>
          </div>

          <input
            type="email"
            name="email"
            id="email"
            formControlName="email"
            placeholder="Ingresa tu correo electrónico"
            autocomplete="email"
            class="block w-full pl-10 pr-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
          />
        </div>

        @if (form.controls.email.touched && form.controls.email.invalid) {
          @if (form.controls.email.hasError('required')) {
            <p class="font-medium text-red-500 text-xs mt-1 ml-1">
              El email es obligatorio
            </p>
          }

          @if (form.controls.email.hasError('email')) {
            <p class="font-medium text-red-500 text-xs mt-1 ml-1">
              Debes ingresar un email válido
            </p>
          }
        }
      </div>

      <!--! nombres -->
      <div>
        <label for="username" class="text-base font-medium text-gray-900">
          Nombre completo
        </label>

        <div class="mt-2.5 relative text-gray-400 focus-within:text-gray-600">
          <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            <svg
              class="w-5 h-5"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              />
            </svg>
          </div>

          <input
            type="text"
            name="username"
            id="username"
            formControlName="name"
            placeholder="Ingresa tu nombre completo"
            autocomplete="username"
            class="block w-full pl-10 pr-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
          />
        </div>

        @if (form.controls.name.touched && form.controls.name.invalid) {
          <p class="font-medium text-red-500 text-xs mt-1 ml-1">
            El nombre es obligatorio
          </p>
        }
      </div>

      <!--! Apellidos -->
      <div>
        <label for="lastName" class="text-base font-medium text-gray-900">
          Apellidos
        </label>

        <div class="mt-2.5 relative text-gray-400 focus-within:text-gray-600">
          <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            <svg
              class="w-5 h-5"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              />
            </svg>
          </div>

          <input
            type="text"
            name="lastName"
            id="lastName"
            formControlName="lastName"
            placeholder="Ingresa tus apellidos"
            autocomplete="family-name"
            class="block w-full pl-10 pr-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
          />
        </div>

        @if (form.controls.lastName.touched && form.controls.lastName.invalid) {
          <p class="font-medium text-red-500 text-xs mt-1 ml-1">
            Los apellidos son obligatorios
          </p>
        }
      </div>

      <!--! Contraseña -->
      <div>
        <label for="password" class="text-base font-medium text-gray-900">
          Contraseña
        </label>

        <div class="mt-2.5 relative text-gray-400 focus-within:text-gray-600">
          <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            <svg
              class="w-5 h-5"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"
              />
            </svg>
          </div>

          <input
            type="password"
            name="password"
            id="password"
            formControlName="password"
            placeholder="Ingresa tu contraseña"
            autocomplete="new-password"
            class="block w-full pl-10 pr-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
          />
        </div>

        @if (form.controls.password.touched && form.controls.password.invalid) {
          @if (form.controls.password.hasError('required')) {
            <p class="font-medium text-red-500 text-xs mt-1 ml-1">
              La contraseña es obligatoria
            </p>
          }

          @if (form.controls.password.hasError('minlength')) {
            <p class="font-medium text-red-500 text-xs mt-1 ml-1">
              Debes ingresar una contraseña de al menos 6 caracteres
            </p>
          }
        }
      </div>

      <!--! Confirmar contraseña -->
      <div>
        <label for="confirmPassword" class="text-base font-medium text-gray-900">
          Confirmar contraseña
        </label>

        <div class="mt-2.5 relative text-gray-400 focus-within:text-gray-600">
          <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            <svg
              class="w-5 h-5"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"
              />
            </svg>
          </div>

          <input
            type="password"
            name="confirmPassword"
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Confirma tu contraseña"
            autocomplete="new-password"
            class="block w-full pl-10 pr-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
          />
        </div>

        @if (form.controls.confirmPassword.touched && form.controls.confirmPassword.invalid) {
          @if (form.controls.confirmPassword.hasError('required')) {
            <p class="font-medium text-red-500 text-xs mt-1 ml-1">
              La confirmación de la contraseña es obligatoria
            </p>
          }

          @if (form.controls.confirmPassword.hasError('minlength')) {
            <p class="font-medium text-red-500 text-xs mt-1 ml-1">
              Debe ingresar al menos 6 caracteres
            </p>
          }
        }
      </div>

      @if (form.hasError('mismatch')) {
        <p class="font-medium text-red-500 text-lg mt-1 ml-1">
          Las contraseñas no coinciden
        </p>
      }

      <div class="flex items-center mt-8">
        <input
          type="checkbox"
          name="agree"
          id="agree"
          formControlName="agreeTerms"
          class="w-5 h-5 text-green-500 bg-white border-gray-200 rounded"
          checked
        />

        <label for="agree" class="ml-3 text-sm font-medium text-gray-500">
            Acepto los
            <a href="#" title="" class="text-blue-600 hover:text-blue-700 hover:underline">
              Términos de servicio
            </a>

            y la

            <a href="#" title="" class="text-blue-600 hover:text-blue-700 hover:underline">
              Política de privacidad
            </a>

            @if (form.controls.agreeTerms.touched && form.controls.agreeTerms.invalid) {
              <p class="font-medium text-red-500 text-xs mt-1">
                Debes aceptar los términos y condiciones
              </p>
            }
        </label>
      </div>

      <div class="flex items-center mt-4">
        <input
          type="checkbox"
          name="notifications"
          id="notifications"
          formControlName="notifications"
          class="w-5 h-5 text-green-500 bg-white border-gray-200 rounded"
          checked
        />

        <label for="notifications" class="ml-3 text-sm font-medium text-gray-500">
          Acepto recibir notificaciones sobre promociones
        </label>
      </div>

      <div>
        <a routerLink="/auth/personal-information" class="text-white">
          <button
            type="submit"
            class="inline-flex items-center justify-center w-full px-4 py-4 text-base font-semibold text-white transition-all duration-200 border border-transparent rounded-md bg-gradient-to-r from-fuchsia-600 to-blue-600 focus:outline-none hover:opacity-80 focus:opacity-80"
            >
            @if ( status() === 'loading' ) {
              <app-loader />
            } @else {
              Crear una cuenta
            }
          </button>
        </a>
      </div>
    </div>
  </form>

} @else {
  <form class="mt-8" [formGroup]="formUser" (ngSubmit)="validateUser()">
    <div class="space-y-5">

      <!--! Email -->
      <div>
        <label for="email" class="text-base font-medium text-gray-900">
          Email
        </label>

        <div class="mt-2.5 relative text-gray-400 focus-within:text-gray-600">
          <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            <svg
              class="w-5 h-5"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"
              />
            </svg>
          </div>

          <input
            type="email"
            name="email"
            id="email"
            formControlName="email"
            placeholder="Ingresa tu correo electrónico"
            class="block w-full py-4 pl-10 pr-4 text-black placeholder-gray-500 transition-all duration-200 border border-gray-200 rounded-md bg-gray-50 focus:outline-none focus:border-blue-600 focus:bg-white caret-blue-600"
          />
        </div>

        @if (formUser.controls.email.touched && formUser.controls.email.invalid) {
          @if (formUser.controls.email.hasError('required')) {
            <p class="font-medium text-red-500 text-xs mt-1 ml-1">
              El email es obligatorio
            </p>
          }

          @if (formUser.controls.email.hasError('email')) {
            <p class="font-medium text-red-500 text-xs mt-1 ml-1">
              Debes ingresar un email válido
            </p>
          }
        }
      </div>

      <div>
        <a routerLink="/auth/personal-information" class="text-white">
          <button
            type="submit"
            class="inline-flex items-center justify-center w-full px-4 py-4 text-base font-semibold text-white transition-all duration-200 border border-transparent rounded-md bg-gradient-to-r from-fuchsia-600 to-blue-600 focus:outline-none hover:opacity-80 focus:opacity-80 cursor-pointer"
            >
            @if ( status() === 'loading' ) {
              <app-loader />
            } @else {
              Siguiente
            }
          </button>
        </a>
      </div>
    </div>
  </form>
}
